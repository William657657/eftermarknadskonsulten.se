<!doctype html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kontakta oss | EMK Sverige AB</title>
  <meta name="description" content="Kontaktformulär till EMK Sverige AB. Meddelanden skickas till info@emksab.se.">
  <link rel="icon" href="/favicon.ico" />
  <link rel="icon" href="/assets/customcolor_icon_customcolor_background.png" type="image/png" />

  <!-- Layout-hjälp (ingen färgstyrning här) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- LÅST TEMA -->
  <link rel="stylesheet" href="/assets/emk-theme.css" />

  <style>
    body{ background:var(--brand-bg); color:var(--brand-text); }
    .form { max-width:720px; margin:0 auto; }
    .field label{ display:block; font-weight:700; margin-bottom:6px; }
    .input, .select, .textarea{
      width:100%; border:1px solid var(--brand-border); background:var(--brand-surface);
      border-radius:12px; padding:12px 14px; font:inherit; color:var(--brand-text);
    }
    .textarea{ min-height:140px; resize:vertical; }
    .hint{ font-size:.85rem; opacity:.72; }
    .grid-2{ display:grid; gap:14px; grid-template-columns:1fr 1fr; }
    @media (max-width:720px){ .grid-2{ grid-template-columns:1fr; } }
    .note{ background:var(--brand-elev); border:1px solid var(--brand-border); border-radius:var(--brand-radius); padding:14px; }
  </style>
</head>
<body>

  <header class="topbar">
    <div class="container wrap" style="height:80px;">
      <a href="/" class="logo" aria-label="Gå till startsidan">
        <img src="/assets/customcolor_logo_customcolor_background.png" alt="EMK logotyp" />
      </a>
      <nav class="nav hidden md:flex">
        <a href="/#tjanster">Tjänster</a>
        <a href="/#process">Process</a>
        <a href="/#case">Case</a>
        <a href="/#policy">Policy</a>
        <a href="/#kontakt">Kontakt</a>
      </nav>
    </div>
  </header>

  <main class="section">
    <div class="container">
      <div class="form">
        <h1 class="hero-title">Kontakta oss</h1>
        <p class="lead mt-2">Fyll i formuläret så öppnas din e-postklient med förifylld information till <b>info@emksab.se</b>.</p>

        <form id="contactForm" class="mt-6 card elev" novalidate>
          <div class="grid-2">
            <div class="field">
              <label for="company">Företag (valfritt)</label>
              <input id="company" name="company" type="text" class="input" autocomplete="organization" />
            </div>
            <div class="field">
              <label for="name">Namn</label>
              <input id="name" name="name" type="text" class="input" autocomplete="name" required />
            </div>
          </div>

          <div class="grid-2 mt-3">
            <div class="field">
              <label for="email">E-post</label>
              <input id="email" name="email" type="email" class="input" autocomplete="email" required />
            </div>
            <div class="field">
              <label for="phone">Telefon (valfritt)</label>
              <input id="phone" name="phone" type="tel" class="input" autocomplete="tel" />
            </div>
          </div>

          <div class="field mt-3">
            <label for="topic">Ärendetyp</label>
            <select id="topic" name="topic" class="select" required>
              <option value="" selected disabled>Välj alternativ…</option>
              <option>Akut ARN-respons</option>
              <option>Yttrande &amp; bemötande</option>
              <option>Full ärendeledning</option>
              <option>Förebyggande stöd (risk för ARN)</option>
              <option>Annan fråga</option>
            </select>
          </div>

          <div class="field mt-3">
            <label for="message">Meddelande</label>
            <textarea id="message" name="message" class="textarea" required placeholder="Beskriv kort ditt ärende (modell/år, miltal, symptom, tidslinje osv)."></textarea>
            <p class="hint mt-1">Bilagor kan inte skickas via formuläret. Bifoga dem i e-posten som öppnas eller skicka till <a href="mailto:info@emksab.se">info@emksab.se</a>.</p>
          </div>

          <div class="mt-4 flex gap-2 flex-wrap">
            <button type="submit" class="btn btn-primary">Skicka</button>
            <a href="mailto:info@emksab.se" class="btn btn-outline">Öppna e-post direkt</a>
          </div>

          <p id="formNote" class="note mt-4 fine" style="display:none;"></p>
        </form>

        <div class="mt-6 small">
          Alternativt: mejla oss direkt på <a href="mailto:info@emksab.se">info@emksab.se</a> eller ring <a href="tel:+46708263366">0708-26 33 66</a>.
        </div>
      </div>
    </div>
  </main>

  <footer class="footer" style="padding-top:24px; padding-bottom:24px;">
    <div class="container wrap">
      <div class="flex items-center gap-2">
        <img src="/assets/customcolor_icon_customcolor_background.png" alt="EMK logotyp" style="height:32px;width:32px;border-radius:8px;" />
        <div>
          <div class="strong">EMK Sverige AB</div>
          <div>Org.nr 559514-0111 · Trensum</div>
        </div>
      </div>
      <div class="grid md:grid-cols-3 gap-6">
        <div>
          <div class="strong">Kontakt</div>
          <div><a href="mailto:info@emksab.se">info@emksab.se</a></div>
          <div>0708-26 33 66</div>
        </div>
        <div>
          <div class="strong">Sidor</div>
          <a href="/#tjanster">Tjänster</a>
          <a href="/#process">Process</a>
          <a href="/#policy">Policy</a>
          <a href="/plattform.html">Plattform</a>
        </div>
        <div>
          <div class="strong">Länkar</div>
          <a href="/integritet.html">Integritet</a>
          <a href="/cookies.html">Cookies</a>
          <a href="/villkor.html">Allmänna villkor</a>
        </div>
      </div>
    </div>
  </footer>

  <script>
    (function(){
      const f = document.getElementById('contactForm');
      const note = document.getElementById('formNote');

      function val(el){ return (el?.value || '').trim(); }

      function encode(s){ return encodeURIComponent(s).replace(/%20/g,'+'); }

      f.addEventListener('submit', function(e){
        e.preventDefault();

        const company = val(document.getElementById('company'));
        const name    = val(document.getElementById('name'));
        const email   = val(document.getElementById('email'));
        const phone   = val(document.getElementById('phone'));
        const topic   = val(document.getElementById('topic'));
        const message = val(document.getElementById('message'));

        // enkel validering
        if(!name || !email || !topic || !message){
          note.style.display='block';
          note.textContent = 'Fyll i Namn, E-post, Ärendetyp och Meddelande.';
          return;
        }

        const subject = `[Eftermarknadskonsulten] ${topic} – ${name}${company ? ' / ' + company : ''}`;
        const bodyLines = [
          `Företag: ${company || '-'}`,
          `Namn: ${name}`,
          `E-post: ${email}`,
          `Telefon: ${phone || '-'}`,
          `Ärendetyp: ${topic}`,
          '',
          'Meddelande:',
          message,
          '',
          '---',
          'Skickat via formulär på eftermarknadskonsulten.se'
        ];

        const mailto = `mailto:info@emksab.se?subject=${encode(subject)}&body=${encode(bodyLines.join('\n'))}`;

        // info till användaren (syns om mailklienten blockeras)
        note.style.display='block';
        note.innerHTML = `Din e-postklient öppnas nu. Om inget händer, <a href="${mailto}">klicka här</a> eller mejla oss på <a href="mailto:info@emksab.se">info@emksab.se</a>.`;

        // öppna mailklient
        window.location.href = mailto;
      });
    })();
  </script>
</body>
</html>
